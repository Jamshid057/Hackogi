{% extends "events/base.html" %}
{% block title %}{{ event.title }}{% endblock %}

{% block content %}
<h2>{{ event.title }}</h2>
<p>{{ event.overview }}</p>
<hr>

<h3>Ideas</h3>

{% if user.is_authenticated %}
<form method="post" action="{% url 'events:create-idea' event.id %}">
    {% csrf_token %}
    {{ idea_form.as_p }}
    <button type="submit" class="btn btn-success mb-3">Add Idea</button>
</form>
{% endif %}

<ul class="list-group">
    {% for idea in ideas %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
            <h5>{{ idea.title }}</h5>
            <p>{{ idea.overview }}</p>
        </div>
        {% if user.is_authenticated %}
        <form method="post" action="{% url 'events:upvote-idea' event.id idea.id %}">
            {% csrf_token %}
            <button class="btn btn-outline-primary">
                {% if idea.is_liked %}
                    ❤️ {{ idea.like_count }}
                {% else %}
                    ♡ {{ idea.like_count }}
                {% endif %}
            </button>
        </form>
        {% else %}
        <span>
            ♡ {{ idea.like_count }}
        </span>
        {% endif %}
    </li>
    {% empty %}
    <li class="list-group-item">No ideas yet.</li>
    {% endfor %}
</ul>
{% endblock %}

